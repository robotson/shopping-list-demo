<html>
<head>
    <script>
        console.log('welcome!');
        console.log('creating default config:');
        let firebaseConfig = {
            apiKey: "AIzaSyBEcmX7MPOlaDMrpAdNb426q6yTbhdkvts",
            authDomain: "robotson-shopping-list.firebaseapp.com",
            databaseURL: "https://robotson-shopping-list.firebaseio.com",
            projectId: "robotson-shopping-list",
            storageBucket: "robotson-shopping-list.appspot.com",
            messagingSenderId: "760807369962",
            appId: "1:760807369962:web:5ab3d866f6b3478b"
        };
        console.log(firebaseConfig);
    </script>
</head>
<body>
<h1>demo</h1>
<div id='root'></div>

<script>
    console.log('loading firebase scripts...');
</script>
<script src="https://www.gstatic.com/firebasejs/6.1.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/6.1.0/firebase-auth.js"></script>

<script defer>

    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);

    let provider = new firebase.auth.TwitterAuthProvider();

    function signInWithTwitterButtonHandler(event){
        console.log('sign in with twitter button click');
        firebase.auth().signInWithRedirect(provider);
    }

    firebase.auth().getRedirectResult().then(function(result) {
        if (result.credential) {
            // This gives you a the Twitter OAuth 1.0 Access Token and Secret.
            // You can use these server side with your app's credentials to access the Twitter API.
            var token = result.credential.accessToken;
            var secret = result.credential.secret;
            // ...
        }
        // The signed-in user info.
        var user = result.user;
        console.log(user);
    }).catch(function(error) {
        // Handle Errors here.
        var errorCode = error.code;
        var errorMessage = error.message;
        // The email of the user's account used.
        var email = error.email;
        // The firebase.auth.AuthCredential type that was used.
        var credential = error.credential;
        console.log(errorCode, errorMessage, email, credential);
    });

    let signInButton = document.createElement('button');
    signInButton.appendChild(document.createTextNode("Sign-In With Twitter"));
    signInButton.addEventListener('click', signInWithTwitterButtonHandler);
    document.getElementById('root').appendChild(signInButton);
</script>
</body>
</html>